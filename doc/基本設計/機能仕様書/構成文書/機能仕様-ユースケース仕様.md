# 機能仕様/ユースケース仕様

## 目次

- [機能仕様/ユースケース仕様](#%e6%a9%9f%e8%83%bd%e4%bb%95%e6%a7%98%e3%83%a6%e3%83%bc%e3%82%b9%e3%82%b1%e3%83%bc%e3%82%b9%e4%bb%95%e6%a7%98)
  - [目次](#%e7%9b%ae%e6%ac%a1)
  - [ユースケース図](#%e3%83%a6%e3%83%bc%e3%82%b9%e3%82%b1%e3%83%bc%e3%82%b9%e5%9b%b3)
  - [機能詳細](#%e6%a9%9f%e8%83%bd%e8%a9%b3%e7%b4%b0)
    - [座席監視システム起動](#%e5%ba%a7%e5%b8%ad%e7%9b%a3%e8%a6%96%e3%82%b7%e3%82%b9%e3%83%86%e3%83%a0%e8%b5%b7%e5%8b%95)
    - [監視の開始](#%e7%9b%a3%e8%a6%96%e3%81%ae%e9%96%8b%e5%a7%8b)
    - [監視座席の状態表示](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e7%8a%b6%e6%85%8b%e8%a1%a8%e7%a4%ba)
    - [監視の終了](#%e7%9b%a3%e8%a6%96%e3%81%ae%e7%b5%82%e4%ba%86)
    - [座席監視システムの終了](#%e5%ba%a7%e5%b8%ad%e7%9b%a3%e8%a6%96%e3%82%b7%e3%82%b9%e3%83%86%e3%83%a0%e3%81%ae%e7%b5%82%e4%ba%86)
    - [Seat Monitoring API起動](#seat-monitoring-api%e8%b5%b7%e5%8b%95)
    - [監視座席の状態確認](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e7%8a%b6%e6%85%8b%e7%a2%ba%e8%aa%8d)
    - [監視座席の追加](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e8%bf%bd%e5%8a%a0)
    - [監視座席の削除](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e5%89%8a%e9%99%a4)
    - [Seat Monitoring API終了](#seat-monitoring-api%e7%b5%82%e4%ba%86)

## ユースケース図

本システムは以下のユースケースを持つ。

![Alternate text](../構成図/ユースケース図.png)

## 機能詳細

### 座席監視システム起動

||||
|:--|:--|:--|
|機能ID/UCID||FR01/UC01|
|UC名称||座席監視システム起動|
|仕様|アクター|ユーザ|
||トリガー|実行ファイルを指定してアプリケーションを起動|
||概要|アプリケーションを起動し、初期画面を表示する|
||事前条件|Seat Monitoring APIが起動している|
||基本フロー|1. 実行ファイルを指定してアプリケーションを起動する <br> 2. 初期画面が表示される|
||代替フロー|なし|
||例外フロー|サーバに接続できない場合 <br> 1. エラー画面を表示する <br> 2. 「OK」ボタン押下でアプリケーションを終了する|
||事後条件|初期画面が表示される|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---

### 監視の開始

||||
|:--|:--|:--|
|機能ID/UCID||FR02/UC02|
|UC名称||監視座席に人がいるか確認|
|仕様|アクター|ユーザ|
||トリガー|「開始」ボタン押下|
||概要|監視画面を表示し、監視を開始する|
||事前条件|初期画面が表示されている|
||基本フロー|1. 初期画面の「開始」ボタンを押下する <br> 2. 監視画面が表示される|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|監視画面が表示される|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||監視画面が表示されている間、「開始」ボタンは押下できない|

---

### 監視座席の状態表示

||||
|:--|:--|:--|
|機能ID/UCID||FR03/UC02|
|UC名称||監視座席に人がいるか確認|
|仕様|アクター|ユーザ|
||トリガー|「開始」ボタン押下|
||概要|1分毎にサーバにアクセスして監視座席の情報を取得し、監視画面に表示する|
||事前条件|初期画面が表示されている|
||基本フロー|1. サーバに接続し、監視座席の状態(いるorいない)を取得する <br> 2. 監視画面に取得結果を表示する|
||代替フロー|カメラが接続されていない場合 <br> 1. 状態を「エラー」として監視画面に表示する|
||例外フロー|サーバに接続できない場合 <br> 1. エラー画面を表示する <br> 2. 「OK」ボタン押下でアプリケーションを終了する|
||事後条件|監視画面が表示される|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---

### 監視の終了

||||
|:--|:--|:--|
|機能ID/UCID||FR04/UC02|
|UC名称||監視座席に人がいるか確認|
|仕様|アクター|ユーザ|
||トリガー|「終了」ボタン押下|
||概要|監視画面を閉じ、監視を終了する|
||事前条件|初期画面、監視画面が表示されている|
||基本フロー|1. 初期画面の「終了」ボタンを押下する <br> 2. 監視画面が閉じられる|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|監視画面が閉じられる|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||監視画面が表示されていない間、「終了」ボタンは押下できない|

---

### 座席監視システムの終了

||||
|:--|:--|:--|
|機能ID/UCID||FR05/UC03|
|UC名称||座席監視システムの終了|
|仕様|アクター|ユーザ|
||トリガー|「アプリの終了」ボタン押下|
||概要|アプリケーションを終了する|
||事前条件|初期画面が表示されている|
||基本フロー|1. 初期画面の「終了」ボタンを押下する <br> 2. 監視画面が閉じられる|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|初期画面が閉じられる|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||監視画面が表示されている間は「アプリの終了」ボタンは押下できない|

---

### Seat Monitoring API起動

||||
|:--|:--|:--|
|機能ID/UCID||FR06/UC04|
|UC名称||Seat Monitoring API起動|
|仕様|アクター|システム管理者|
||トリガー|サーバPCの起動|
||概要|サーバPCの起動後、自動でSeat Monitoring APIが起動する|
||事前条件|初期画面が表示されている|
||基本フロー|1. サーバPCを起動する <br> 2. Seat Monitoring APIが起動する <br> 3. 設定ファイルを読み込みカメラのデバイスパスと名前のリストを作成する|
||代替フロー|1. Webサーバを起動する|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---

### 監視座席の状態確認

||||
|:--|:--|:--|
|機能ID/UCID||FR07/UC05|
|UC名称||監視座席に人がいるか確認|
|仕様|アクター|機能ID:FR03(監視座席の状態表示)|
||トリガー|座席監視システムからの呼び出し|
||概要|座席監視システムが指定するWebカメラから画僧を取得し、人がいるorいないを判断して座席監視システムに伝える|
||事前条件|Seat Monitoring APIが起動している|
||基本フロー|1. 座席監視システムに呼び出される <br> 2. クライアントが指定するWebカメラから画像を取得 <br> 3. 画像に人がいるorいないを判断 <br> 4. クライアントに結果を返す|
||代替フロー|指定されたWebカメラを認識できない場合 <br> 1. Webカメラが見つからない旨のエラーを返す|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---

### 監視座席の追加

||||
|:--|:--|:--|
|機能ID/UCID||FR08/UC06|
|UC名称||監視座席の追加|
|仕様|アクター|システム管理者|
||トリガー|監視座席の追加|
||概要|サーバPCにWebカメラを追加で接続し、監視座席を追加する|
||事前条件|サーバPCが起動している|
||基本フロー|1. Webカメラを接続する <br> 2. confirmDevicePath.exeを使用して接続したWebカメラのデバイスパスを確認する <br> 3. linkDevicepathAndName.csvファイルを書き換える <br> 4. Seat Monitoring APIを再起動する|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---

### 監視座席の削除

||||
|:--|:--|:--|
|機能ID/UCID||FR09/UC07|
|UC名称||監視座席の削除|
|仕様|アクター|システム管理者|
||トリガー|監視座席の削除|
||概要|サーバPCにWebカメラの接続を解除し、監視座席を削除する|
||事前条件|サーバPCが起動している|
||基本フロー|1. Webカメラの接続を解除する <br> 2. confirmDevicePath.exeを使用して接続されているWebカメラのデバイスパスを確認する <br> 3. linkDevicepathAndName.csvファイルを書き換える <br> 4. Seat Monitoring APIを再起動する|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---

### Seat Monitoring API終了

||||
|:--|:--|:--|
|機能ID/UCID||FR10/UC08|
|UC名称||Seat Monitoring APIの終了|
|仕様|アクター|システム管理者|
||トリガー|サーバPCの起動|
||概要|サーバPCのシャットダウン時、自動でSeat Monitoring APIが終了する|
||事前条件|Seat Monitoring APIが起動している|
||基本フロー|1. サーバPCをシャットダウンする|
||代替フロー|1. Webサーバを停止する|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが終了している|
|関連要件|性能要求|なし|
||セキュリティ要求|なし|
||テスト要件|なし|
|補足||なし|

---
