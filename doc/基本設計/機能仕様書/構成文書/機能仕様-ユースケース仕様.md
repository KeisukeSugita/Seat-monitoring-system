# 機能仕様/ユースケース仕様

## 目次

- [機能仕様/ユースケース仕様](#%e6%a9%9f%e8%83%bd%e4%bb%95%e6%a7%98%e3%83%a6%e3%83%bc%e3%82%b9%e3%82%b1%e3%83%bc%e3%82%b9%e4%bb%95%e6%a7%98)
  - [目次](#%e7%9b%ae%e6%ac%a1)
  - [ユースケース図](#%e3%83%a6%e3%83%bc%e3%82%b9%e3%82%b1%e3%83%bc%e3%82%b9%e5%9b%b3)
  - [機能詳細](#%e6%a9%9f%e8%83%bd%e8%a9%b3%e7%b4%b0)
    - [サーバ側](#%e3%82%b5%e3%83%bc%e3%83%90%e5%81%b4)
      - [Seat Monitoring API起動](#seat-monitoring-api%e8%b5%b7%e5%8b%95)
      - [監視座席の状態確認](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e7%8a%b6%e6%85%8b%e7%a2%ba%e8%aa%8d)
      - [監視座席の追加](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e8%bf%bd%e5%8a%a0)
      - [監視座席の削除](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ae%e5%89%8a%e9%99%a4)
      - [Seat Monitoring API終了](#seat-monitoring-api%e7%b5%82%e4%ba%86)
    - [クライアント側](#%e3%82%af%e3%83%a9%e3%82%a4%e3%82%a2%e3%83%b3%e3%83%88%e5%81%b4)
      - [座席監視アプリ起動](#%e5%ba%a7%e5%b8%ad%e7%9b%a3%e8%a6%96%e3%82%a2%e3%83%97%e3%83%aa%e8%b5%b7%e5%8b%95)
      - [監視座席に人がいるか確認](#%e7%9b%a3%e8%a6%96%e5%ba%a7%e5%b8%ad%e3%81%ab%e4%ba%ba%e3%81%8c%e3%81%84%e3%82%8b%e3%81%8b%e7%a2%ba%e8%aa%8d)
        - [画面仕様](#%e7%94%bb%e9%9d%a2%e4%bb%95%e6%a7%98)
      - [座席監視アプリの終了](#%e5%ba%a7%e5%b8%ad%e7%9b%a3%e8%a6%96%e3%82%a2%e3%83%97%e3%83%aa%e3%81%ae%e7%b5%82%e4%ba%86)

## ユースケース図

本システムは以下のユースケースを持つ。

![Alternate text](../構成図/ユースケース図.png)

## 機能詳細

### サーバ側

#### Seat Monitoring API起動

||||
|:--|:--|:--|
|機能ID/UCID||FR-S01/UC-S01|
|UC名称||Seat Monitoring API起動|
|仕様|アクター|システム管理者|
||トリガー|サーバPCの起動|
||概要|サーバPCの起動後、自動でSeat Monitoring APIが起動する|
||事前条件|初期画面が表示されている|
||基本フロー|1. サーバPCを起動する <br> 2. Seat Monitoring APIが起動する <br> 3. linkDevicepathAndName.csvを読み込みカメラのモニカと名前のリストを作成する|
||代替フロー|1. Webサーバを起動する|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|補足||linkDevicepathAndName.csvの詳細については[データ仕様](データ仕様.md)に記載|

---

#### 監視座席の状態確認

||||
|:--|:--|:--|
|機能ID/UCID||FR-S02/UC-S02|
|UC名称||監視座席に人がいるか確認|
|仕様|アクター|機能ID:FR03(監視座席の状態表示)|
||トリガー|座席監視システムからの呼び出し|
||概要|座席管理アプリから呼び出され、監視座席の状態を座席監視システムに返す|
||事前条件|Seat Monitoring APIが起動している|
||基本フロー|1. 座席監視アプリに呼び出される <br> 2. リストにある全てのカメラから画像を取得し、画像に人がいるorいないをそれぞれ判断する <br> 3. クライアントに結果を名前とtrueかfalseで返す|
||代替フロー|指定されたWebカメラを認識できない場合 <br> 1. true、falseではなくnullを返す|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|補足||Seat Monitoring APIの詳細については[WebAPI仕様](WebAPI仕様.md)に記載|

---

#### 監視座席の追加

||||
|:--|:--|:--|
|機能ID/UCID||FR-S03/UC-S03|
|UC名称||監視座席の追加|
|仕様|アクター|システム管理者|
||トリガー|監視座席の追加|
||概要|サーバPCにWebカメラを追加で接続し、監視座席を追加する|
||事前条件|サーバPCが起動している|
||基本フロー|1. Webカメラを接続する <br> 2. Webカメラのモニカと監視座席名を確認する <br> 3. linkDevicepathAndName.csvファイルを書き換える <br> 4. Seat Monitoring APIを再起動する|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|補足||linkDevicepathAndName.csvの詳細、設定方法については[データ仕様](データ仕様.md)にそれぞれ記載|

---

#### 監視座席の削除

||||
|:--|:--|:--|
|機能ID/UCID||FR-S04/UC-S04|
|UC名称||監視座席の削除|
|仕様|アクター|システム管理者|
||トリガー|監視座席の削除|
||概要|サーバPCにWebカメラの接続を解除し、監視座席を削除する|
||事前条件|サーバPCが起動している|
||基本フロー|1. Webカメラの接続を解除する <br> 2. Webカメラのモニカと監視座席名を確認する <br> 3. linkDevicepathAndName.csvファイルを書き換える <br> 4. Seat Monitoring APIを再起動する|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが起動している|
|補足||linkDevicepathAndName.csvの詳細、設定方法については[データ仕様](データ仕様.md)にそれぞれ記載|

---

#### Seat Monitoring API終了

||||
|:--|:--|:--|
|機能ID/UCID||FR-S05/UC-S05|
|UC名称||Seat Monitoring APIの終了|
|仕様|アクター|システム管理者|
||トリガー|サーバPCのシャットダウン|
||概要|サーバPCのシャットダウン時、自動でSeat Monitoring APIが終了する|
||事前条件|Seat Monitoring APIが起動している|
||基本フロー|1. サーバPCをシャットダウンする|
||代替フロー|1. Webサーバを停止する|
||例外フロー|なし|
||事後条件|Seat Monitoring APIが終了している|
|補足||なし|

---
<br>

### クライアント側

#### 座席監視アプリ起動

||||
|:--|:--|:--|
|機能ID/UCID||FR-C01/UC-C01|
|UC名称||座席監視アプリ起動|
|仕様|アクター|ユーザ|
||トリガー|実行ファイルを指定してアプリケーションを起動|
||概要|アプリケーションを起動し、初期画面を表示する|
||事前条件|Seat Monitoring APIが起動している|
||基本フロー|1. 実行ファイルを指定してアプリケーションを起動する <br> 2. 初期画面が表示される|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|初期画面が表示されている|
|補足||なし|

---

#### 監視座席に人がいるか確認

||||
|:--|:--|:--|
|機能ID/UCID||FR-C02/UC-C02|
|UC名称||監視座席に人がいるか確認|
|仕様|アクター|ユーザ|
||トリガー|「監視開始」ボタン押下|
||概要|1分毎にSeat Monitoring APIから監視座席の状態を取得し、初期画面に表示する|
||事前条件|初期画面が表示されている|
||基本フロー|1. Seat Monitoring APIから監視座席の状態を取得する <br> 2. 監視画面に取得結果を表示する|
||代替フロー|サーバに接続できない場合 <br> 1. サーバに接続できないことを示すアイコンを表示する|
||例外フロー|なし|
||事後条件|監視画面が表示される|
|補足||Seat Monitoring APIの詳細については[WebAPI仕様](WebAPI仕様.md)に記載|

##### 画面仕様

![Alternate text](../構成図/初期画面.png)

|No.|項目名|説明|
|:--|:--|:--|
|①|監視座席状態アイコン|監視座席の状態を表すアイコンを表示する
|②|監視座席名表示領域|監視座席の名前を表示する。<br> 上から順に「いる」、「いない」、「カメラへの接続失敗」<br> |

![Alternate text](../構成図/エラー.png)

- サーバに接続できない時に表示される画面
- OKボタンを押下すると再接続を試みる

---

#### 座席監視アプリの終了

||||
|:--|:--|:--|
|機能ID/UCID||FR-C03/UC-C03|
|UC名称||座席監視アプリの終了|
|仕様|アクター|ユーザ|
||トリガー|「閉じる」ボタン押下|
||概要|アプリケーションを終了する|
||事前条件|初期画面が表示されている|
||基本フロー|1. 初期画面の「閉じる」ボタンを押下する <br> 2. 初期画面が閉じられ、座席監視アプリが終了する|
||代替フロー|なし|
||例外フロー|なし|
||事後条件|初期画面が閉じられ、座席監視アプリが終了している|
|補足||なし|

---
